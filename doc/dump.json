[
  {
    "__docId__": 0,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/Eligibility.js",
    "memberof": null,
    "longname": "src/Eligibility.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "'use strict';\n\nconst DEFAULT_LIMIT = 20;\nconst DEFAULT_PERIOD = 5000;\n\n/**\n * Eligibility\n */\nclass Eligibility {\n\n  /**\n   * @param {object} config Object of values\n   * @return {object} An instance of the eligibility object\n   */\n  constructor(config) {\n    let limit = DEFAULT_LIMIT;\n    let period = DEFAULT_PERIOD;\n\n    if (config != null) {\n      if (config.limit != null) {\n        limit = config.limit;\n      }\n      if (config.period != null) {\n        period = config.period;\n      }\n    }\n\n    this._limit           = limit;\n    this._period          = period;\n    this._startTime       = (new Date()).valueOf();\n    this._requestCount    = 0;\n\n    return this;\n  }\n\n  /**\n   * @return {int} Time remaining expressed as an integer of ms\n   */\n  _getPeriodRemaining() {\n    // convert to rolling instead of fixed buckets\n\n    const timeNow = (new Date()).valueOf();\n    const elapsedTime = timeNow - this._startTime;\n    let periodRemaining = this._period - elapsedTime;\n\n    if (periodRemaining < 0) {\n      periodRemaining = this._period;\n      this._startTime = timeNow;\n      this._requestCount = 0;\n    }\n\n    return periodRemaining;\n  }\n\n  /**\n   * @return {boolean} The current eligibility of the request\n   */\n  check() {\n    const periodRemaining = this._getPeriodRemaining();\n    this._requestCount++;\n\n    const test = (periodRemaining > 0 && this._requestCount <= this._limit);\n    return test;\n  }\n\n};\n\nmodule.exports = Eligibility;\n"
  },
  {
    "__docId__": 1,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "DEFAULT_LIMIT",
    "memberof": "src/Eligibility.js",
    "longname": "src/Eligibility.js~DEFAULT_LIMIT",
    "access": null,
    "export": false,
    "importPath": "simple-limiter/src/Eligibility.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 2,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "DEFAULT_PERIOD",
    "memberof": "src/Eligibility.js",
    "longname": "src/Eligibility.js~DEFAULT_PERIOD",
    "access": null,
    "export": false,
    "importPath": "simple-limiter/src/Eligibility.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 3,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Eligibility",
    "memberof": "src/Eligibility.js",
    "longname": "src/Eligibility.js~Eligibility",
    "access": null,
    "export": false,
    "importPath": "simple-limiter/src/Eligibility.js",
    "importStyle": null,
    "description": "Eligibility",
    "lineNumber": 9,
    "interface": false
  },
  {
    "__docId__": 4,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/Eligibility.js~Eligibility",
    "longname": "src/Eligibility.js~Eligibility#constructor",
    "access": null,
    "description": null,
    "lineNumber": 15,
    "params": [
      {
        "nullable": null,
        "types": [
          "object"
        ],
        "spread": false,
        "optional": false,
        "name": "config",
        "description": "Object of values"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "object"
      ],
      "spread": false,
      "description": "An instance of the eligibility object"
    },
    "generator": false
  },
  {
    "__docId__": 5,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_limit",
    "memberof": "src/Eligibility.js~Eligibility",
    "longname": "src/Eligibility.js~Eligibility#_limit",
    "access": null,
    "description": null,
    "lineNumber": 28,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 6,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_period",
    "memberof": "src/Eligibility.js~Eligibility",
    "longname": "src/Eligibility.js~Eligibility#_period",
    "access": null,
    "description": null,
    "lineNumber": 29,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 7,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_startTime",
    "memberof": "src/Eligibility.js~Eligibility",
    "longname": "src/Eligibility.js~Eligibility#_startTime",
    "access": null,
    "description": null,
    "lineNumber": 30,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 8,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_requestCount",
    "memberof": "src/Eligibility.js~Eligibility",
    "longname": "src/Eligibility.js~Eligibility#_requestCount",
    "access": null,
    "description": null,
    "lineNumber": 31,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 9,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_getPeriodRemaining",
    "memberof": "src/Eligibility.js~Eligibility",
    "longname": "src/Eligibility.js~Eligibility#_getPeriodRemaining",
    "access": null,
    "description": null,
    "lineNumber": 39,
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "int"
      ],
      "spread": false,
      "description": "Time remaining expressed as an integer of ms"
    },
    "generator": false
  },
  {
    "__docId__": 10,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_startTime",
    "memberof": "src/Eligibility.js~Eligibility",
    "longname": "src/Eligibility.js~Eligibility#_startTime",
    "access": null,
    "description": null,
    "lineNumber": 48,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 11,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_requestCount",
    "memberof": "src/Eligibility.js~Eligibility",
    "longname": "src/Eligibility.js~Eligibility#_requestCount",
    "access": null,
    "description": null,
    "lineNumber": 49,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    }
  },
  {
    "__docId__": 12,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "check",
    "memberof": "src/Eligibility.js~Eligibility",
    "longname": "src/Eligibility.js~Eligibility#check",
    "access": null,
    "description": null,
    "lineNumber": 58,
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": "The current eligibility of the request"
    },
    "generator": false
  },
  {
    "__docId__": 13,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/Limiter.js",
    "memberof": null,
    "longname": "src/Limiter.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "'use strict';\n\nconst _           = require('lodash');\nconst Eligibility = require('./Eligibility');\n\nconst DEFAULT_KEY = 'ip';\n\n/**\n * TODO: describe\n */\nclass Limiter {\n\n  /**\n   * @param {object} config Object of values\n   * @return empty\n   */\n  constructor(config) {\n    let key = DEFAULT_KEY; \n    let limit = null;\n    let period = null;\n\n    if (config != null) {\n\n      if (config.key != null) {\n        key = config.key;\n      }\n\n      limit  = config.limit;\n      period = config.period;\n    }\n\n    this._config = { key, limit, period };\n    this._eligibility = {};\n\n    // return requests left\n  }\n\n  checkRequest(opts) {\n\n    if (opts == null) {\n      throw new Error('Error: opts are required.');\n    }\n\n    const request  = opts.request;\n    const key = _.get(request, this._config.key);\n    const limit = this._config.limit;\n    const period = this._config.period;\n\n    if (this._eligibility[key] == null) {\n      this._eligibility[key] = new Eligibility({ limit, period });\n    }\n\n    // const isEligibleRequest = this._eligibility[key].check();\n\n    // if (!isEligibleRequest) {\n    //   throw new Error('429');\n    // }\n\n    const requestStatus = {\n      validity : this._eligibility[key].check(),\n      // headers  : this._eligibility[key].getHeaders(),\n    };\n\n    return requestStatus;\n\n  }\n\n}\nmodule.exports = Limiter;\n\n"
  },
  {
    "__docId__": 14,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "_",
    "memberof": "src/Limiter.js",
    "longname": "src/Limiter.js~_",
    "access": null,
    "export": false,
    "importPath": "simple-limiter/src/Limiter.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 15,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "Eligibility",
    "memberof": "src/Limiter.js",
    "longname": "src/Limiter.js~Eligibility",
    "access": null,
    "export": false,
    "importPath": "simple-limiter/src/Limiter.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 4,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 16,
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "DEFAULT_KEY",
    "memberof": "src/Limiter.js",
    "longname": "src/Limiter.js~DEFAULT_KEY",
    "access": null,
    "export": false,
    "importPath": "simple-limiter/src/Limiter.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 6,
    "undocument": true,
    "type": {
      "types": [
        "string"
      ]
    }
  },
  {
    "__docId__": 17,
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Limiter",
    "memberof": "src/Limiter.js",
    "longname": "src/Limiter.js~Limiter",
    "access": null,
    "export": false,
    "importPath": "simple-limiter/src/Limiter.js",
    "importStyle": null,
    "description": "TODO: describe",
    "lineNumber": 11,
    "interface": false
  },
  {
    "__docId__": 18,
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "src/Limiter.js~Limiter",
    "longname": "src/Limiter.js~Limiter#constructor",
    "access": null,
    "description": null,
    "lineNumber": 17,
    "params": [
      {
        "nullable": null,
        "types": [
          "object"
        ],
        "spread": false,
        "optional": false,
        "name": "config",
        "description": "Object of values"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "*"
      ],
      "spread": false,
      "description": "empty"
    },
    "generator": false
  },
  {
    "__docId__": 19,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_config",
    "memberof": "src/Limiter.js~Limiter",
    "longname": "src/Limiter.js~Limiter#_config",
    "access": null,
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 20,
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_eligibility",
    "memberof": "src/Limiter.js~Limiter",
    "longname": "src/Limiter.js~Limiter#_eligibility",
    "access": null,
    "description": null,
    "lineNumber": 33,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 21,
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "checkRequest",
    "memberof": "src/Limiter.js~Limiter",
    "longname": "src/Limiter.js~Limiter#checkRequest",
    "access": null,
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "params": [
      {
        "name": "opts",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "generator": false
  },
  {
    "__docId__": 22,
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "src/index.js",
    "memberof": null,
    "longname": "src/index.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "'use strict';\n\nmodule.exports.Limiter = require('./Limiter');\nmodule.exports.Eligibility = require('./Eligibility');\n"
  },
  {
    "__docId__": 24,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Infinity",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Infinity",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 25,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "NaN",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~NaN",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 26,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "undefined",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~undefined",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 27,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "null",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~null",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 28,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Object",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 29,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~object",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 30,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Function",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 31,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~function",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 32,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Boolean",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 33,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~boolean",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 34,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Symbol",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Symbol",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 35,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Error",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Error",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 36,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "EvalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/EvalError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~EvalError",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 37,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "InternalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/InternalError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~InternalError",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 38,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "RangeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~RangeError",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 39,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "ReferenceError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~ReferenceError",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 40,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "SyntaxError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~SyntaxError",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 41,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "TypeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~TypeError",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 42,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "URIError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/URIError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~URIError",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 43,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Number",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 44,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~number",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 45,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Date",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Date",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 46,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "String",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~String",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 47,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "string",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~string",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 48,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "RegExp",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~RegExp",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 49,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Array",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 50,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Int8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Int8Array",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 51,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Uint8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Uint8Array",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 52,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Uint8ClampedArray",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Uint8ClampedArray",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 53,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Int16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Int16Array",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 54,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Uint16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Uint16Array",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 55,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Int32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Int32Array",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 56,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Uint32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Uint32Array",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 57,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Float32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Float32Array",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 58,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Float64Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Float64Array",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 59,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Map",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Map",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 60,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Set",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Set",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 61,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "WeakMap",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~WeakMap",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 62,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "WeakSet",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~WeakSet",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 63,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "ArrayBuffer",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~ArrayBuffer",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 64,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "DataView",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~DataView",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 65,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "JSON",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~JSON",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 66,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Promise",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Promise",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 67,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Generator",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Generator",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 68,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "GeneratorFunction",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/GeneratorFunction",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~GeneratorFunction",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 69,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Reflect",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Reflect",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 70,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Proxy",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Proxy",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 72,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "CanvasRenderingContext2D",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~CanvasRenderingContext2D",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 73,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "DocumentFragment",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~DocumentFragment",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 74,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Element",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/Element",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~Element",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 75,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Event",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/Event",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~Event",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 76,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Node",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/Node",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~Node",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 77,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "NodeList",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/NodeList",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~NodeList",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 78,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "XMLHttpRequest",
    "externalLink": "https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~XMLHttpRequest",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 79,
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "AudioContext",
    "externalLink": "https://developer.mozilla.org/en/docs/Web/API/AudioContext",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~AudioContext",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "__docId__": 80,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/Eligibility.test.js",
    "memberof": null,
    "longname": "test/Eligibility.test.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "'use strict';\nconst chai = require('chai');\nconst sinon = require('sinon');\nconst sinonChai = require('sinon-chai');\nconst START_TIME = 140000;\n\nchai.use(sinonChai);\n\nconst expect = chai.expect;\n\ndescribe('Eligiblility', () => {\n  let Eligibility;\n  let config;\n  let clock;\n  let eligibility;\n\n  beforeEach(() => {\n    Eligibility = require('../src/Eligibility.js');\n    config = {\n      period : 5000,\n      limit  : 20,\n    };\n    clock = sinon.useFakeTimers(START_TIME);\n  });\n\n  afterEach(() => {\n    clock.restore();\n  });\n\n  describe('#constructor', () => {\n\n    it('should be able to init without a config', () => {\n      expect(new Eligibility).not.to.throw;\n    });\n\n    describe('without config', () => {\n\n      beforeEach(() => {\n        eligibility = new Eligibility();\n      });\n\n      it('should return an object', () => {\n        expect(typeof(eligibility)).to.equal('object');\n      });\n\n      it('should create a limit', () => {\n        expect(eligibility._limit).to.exist;\n      });\n\n      it('should create a period', () => {\n        expect(eligibility._period).to.exist;\n      });\n\n      it('should create a startTime', () => {\n        // TODO: can check the time is accurate?\n        expect(eligibility._startTime).to.exist;\n      });\n\n      it('should create a requestCount', () => {\n        expect(eligibility._requestCount).to.exist;\n      });\n\n    });\n\n    describe('with config', () => {\n\n      beforeEach(() => {\n        eligibility = new Eligibility(config);\n      });\n\n      it('should return an object', () => {\n        expect(typeof(eligibility)).to.equal('object');\n      });\n\n      it('should create a limit', () => {\n        expect(eligibility._limit).to.exist;\n      });\n\n      it('should create a period', () => {\n        expect(eligibility._period).to.exist;\n      });\n\n      it('should create a startTime', () => {\n        // TODO: can check the time is accurate?\n        expect(eligibility._startTime).to.exist;\n      });\n\n      it('should create a requestCount', () => {\n        expect(eligibility._requestCount).to.exist;\n      });\n\n    });\n    \n  });\n\n  describe('#_getPeriodRemaining', () => {\n\n    beforeEach(() => {\n      eligibility = new Eligibility(config);\n    });\n\n    describe('when in the period', () => {\n      it('should return 3068 if 1932 ms have passed', () => {\n        clock.tick(1932);\n        expect(eligibility._getPeriodRemaining()).to.equal(3068);\n      });\n\n      it('should return 0 if 5000 ms have passed', () => {\n        clock.tick(5000);\n        expect(eligibility._getPeriodRemaining()).to.equal(0);\n      });\n\n      it('should not change the startTime', () => {\n        clock.tick(200);\n        eligibility._getPeriodRemaining();\n        expect(eligibility._startTime).to.equal(START_TIME);\n      });\n\n      it('should not reset _requestCounter', () => {\n        clock.tick(200);\n        eligibility._requestCount = 35;\n        eligibility._getPeriodRemaining();\n        expect(eligibility._requestCount).to.equal(35);\n      });\n\n    });\n\n    describe('when past the period', () => {\n      beforeEach(() => {\n        clock.tick(5001);\n      });\n\n      it('should return 5000 if 5001 ms have passed', () => {\n        expect(eligibility._getPeriodRemaining()).to.equal(5000);\n      });\n\n      it('should update startTime', () => {\n        eligibility._getPeriodRemaining();\n        expect(eligibility._startTime).to.equal(START_TIME + 5001);\n      });\n\n      it('should reset _requestCount if period is reset', () => {\n        eligibility._requestCount = 10;\n        eligibility._getPeriodRemaining();\n        expect(eligibility._requestCount).to.equal(0);\n      });\n\n    });\n\n  });\n\n  describe('check', () => {\n\n    beforeEach(() => {\n      eligibility = new Eligibility(config);\n    });\n\n    it('should call _getPeriodRemaining', () => {\n      sinon.spy(eligibility, '_getPeriodRemaining');\n      eligibility.check();\n\n      expect(eligibility._getPeriodRemaining).to.have.been.called;\n    });\n\n    it('should increment _requestCount', () => {\n      expect(eligibility._requestCount).to.equal(0);\n      eligibility.check();\n      expect(eligibility._requestCount).to.equal(1);\n    });\n\n    it('should return true if _requestCount is less than _limit', () => {\n      expect(eligibility.check()).to.be.true;\n    });\n\n    it('should return false if _requestCount is higher than _limit', () => {\n      eligibility._requestCount = 20;\n      expect(eligibility.check()).to.be.false;\n    });\n\n  });\n\n  describe('getHeaders', () => {\n\n  });\n\n});\n"
  },
  {
    "__docId__": 81,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe0",
    "testId": 0,
    "memberof": "test/Eligibility.test.js",
    "testDepth": 0,
    "longname": "test/Eligibility.test.js~describe0",
    "access": null,
    "description": "Eligiblility",
    "lineNumber": 11
  },
  {
    "__docId__": 82,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe1",
    "testId": 1,
    "memberof": "test/Eligibility.test.js~describe0",
    "testDepth": 1,
    "longname": "test/Eligibility.test.js~describe0.describe1",
    "access": null,
    "description": "#constructor",
    "lineNumber": 30
  },
  {
    "__docId__": 83,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it2",
    "testId": 2,
    "memberof": "test/Eligibility.test.js~describe0.describe1",
    "testDepth": 2,
    "longname": "test/Eligibility.test.js~describe0.describe1.it2",
    "access": null,
    "description": "should be able to init without a config",
    "lineNumber": 32
  },
  {
    "__docId__": 84,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe3",
    "testId": 3,
    "memberof": "test/Eligibility.test.js~describe0.describe1",
    "testDepth": 2,
    "longname": "test/Eligibility.test.js~describe0.describe1.describe3",
    "access": null,
    "description": "without config",
    "lineNumber": 36
  },
  {
    "__docId__": 85,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it4",
    "testId": 4,
    "memberof": "test/Eligibility.test.js~describe0.describe1.describe3",
    "testDepth": 3,
    "longname": "test/Eligibility.test.js~describe0.describe1.describe3.it4",
    "access": null,
    "description": "should return an object",
    "lineNumber": 42
  },
  {
    "__docId__": 86,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it5",
    "testId": 5,
    "memberof": "test/Eligibility.test.js~describe0.describe1.describe3",
    "testDepth": 3,
    "longname": "test/Eligibility.test.js~describe0.describe1.describe3.it5",
    "access": null,
    "description": "should create a limit",
    "lineNumber": 46
  },
  {
    "__docId__": 87,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it6",
    "testId": 6,
    "memberof": "test/Eligibility.test.js~describe0.describe1.describe3",
    "testDepth": 3,
    "longname": "test/Eligibility.test.js~describe0.describe1.describe3.it6",
    "access": null,
    "description": "should create a period",
    "lineNumber": 50
  },
  {
    "__docId__": 88,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it7",
    "testId": 7,
    "memberof": "test/Eligibility.test.js~describe0.describe1.describe3",
    "testDepth": 3,
    "longname": "test/Eligibility.test.js~describe0.describe1.describe3.it7",
    "access": null,
    "description": "should create a startTime",
    "lineNumber": 54
  },
  {
    "__docId__": 89,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it8",
    "testId": 8,
    "memberof": "test/Eligibility.test.js~describe0.describe1.describe3",
    "testDepth": 3,
    "longname": "test/Eligibility.test.js~describe0.describe1.describe3.it8",
    "access": null,
    "description": "should create a requestCount",
    "lineNumber": 59
  },
  {
    "__docId__": 90,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe9",
    "testId": 9,
    "memberof": "test/Eligibility.test.js~describe0.describe1",
    "testDepth": 2,
    "longname": "test/Eligibility.test.js~describe0.describe1.describe9",
    "access": null,
    "description": "with config",
    "lineNumber": 65
  },
  {
    "__docId__": 91,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it10",
    "testId": 10,
    "memberof": "test/Eligibility.test.js~describe0.describe1.describe9",
    "testDepth": 3,
    "longname": "test/Eligibility.test.js~describe0.describe1.describe9.it10",
    "access": null,
    "description": "should return an object",
    "lineNumber": 71
  },
  {
    "__docId__": 92,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it11",
    "testId": 11,
    "memberof": "test/Eligibility.test.js~describe0.describe1.describe9",
    "testDepth": 3,
    "longname": "test/Eligibility.test.js~describe0.describe1.describe9.it11",
    "access": null,
    "description": "should create a limit",
    "lineNumber": 75
  },
  {
    "__docId__": 93,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it12",
    "testId": 12,
    "memberof": "test/Eligibility.test.js~describe0.describe1.describe9",
    "testDepth": 3,
    "longname": "test/Eligibility.test.js~describe0.describe1.describe9.it12",
    "access": null,
    "description": "should create a period",
    "lineNumber": 79
  },
  {
    "__docId__": 94,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it13",
    "testId": 13,
    "memberof": "test/Eligibility.test.js~describe0.describe1.describe9",
    "testDepth": 3,
    "longname": "test/Eligibility.test.js~describe0.describe1.describe9.it13",
    "access": null,
    "description": "should create a startTime",
    "lineNumber": 83
  },
  {
    "__docId__": 95,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it14",
    "testId": 14,
    "memberof": "test/Eligibility.test.js~describe0.describe1.describe9",
    "testDepth": 3,
    "longname": "test/Eligibility.test.js~describe0.describe1.describe9.it14",
    "access": null,
    "description": "should create a requestCount",
    "lineNumber": 88
  },
  {
    "__docId__": 96,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe15",
    "testId": 15,
    "memberof": "test/Eligibility.test.js~describe0",
    "testDepth": 1,
    "longname": "test/Eligibility.test.js~describe0.describe15",
    "access": null,
    "description": "#_getPeriodRemaining",
    "lineNumber": 96
  },
  {
    "__docId__": 97,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe16",
    "testId": 16,
    "memberof": "test/Eligibility.test.js~describe0.describe15",
    "testDepth": 2,
    "longname": "test/Eligibility.test.js~describe0.describe15.describe16",
    "access": null,
    "description": "when in the period",
    "lineNumber": 102
  },
  {
    "__docId__": 98,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it17",
    "testId": 17,
    "memberof": "test/Eligibility.test.js~describe0.describe15.describe16",
    "testDepth": 3,
    "longname": "test/Eligibility.test.js~describe0.describe15.describe16.it17",
    "access": null,
    "description": "should return 3068 if 1932 ms have passed",
    "lineNumber": 103
  },
  {
    "__docId__": 99,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it18",
    "testId": 18,
    "memberof": "test/Eligibility.test.js~describe0.describe15.describe16",
    "testDepth": 3,
    "longname": "test/Eligibility.test.js~describe0.describe15.describe16.it18",
    "access": null,
    "description": "should return 0 if 5000 ms have passed",
    "lineNumber": 108
  },
  {
    "__docId__": 100,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it19",
    "testId": 19,
    "memberof": "test/Eligibility.test.js~describe0.describe15.describe16",
    "testDepth": 3,
    "longname": "test/Eligibility.test.js~describe0.describe15.describe16.it19",
    "access": null,
    "description": "should not change the startTime",
    "lineNumber": 113
  },
  {
    "__docId__": 101,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it20",
    "testId": 20,
    "memberof": "test/Eligibility.test.js~describe0.describe15.describe16",
    "testDepth": 3,
    "longname": "test/Eligibility.test.js~describe0.describe15.describe16.it20",
    "access": null,
    "description": "should not reset _requestCounter",
    "lineNumber": 119
  },
  {
    "__docId__": 102,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe21",
    "testId": 21,
    "memberof": "test/Eligibility.test.js~describe0.describe15",
    "testDepth": 2,
    "longname": "test/Eligibility.test.js~describe0.describe15.describe21",
    "access": null,
    "description": "when past the period",
    "lineNumber": 128
  },
  {
    "__docId__": 103,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it22",
    "testId": 22,
    "memberof": "test/Eligibility.test.js~describe0.describe15.describe21",
    "testDepth": 3,
    "longname": "test/Eligibility.test.js~describe0.describe15.describe21.it22",
    "access": null,
    "description": "should return 5000 if 5001 ms have passed",
    "lineNumber": 133
  },
  {
    "__docId__": 104,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it23",
    "testId": 23,
    "memberof": "test/Eligibility.test.js~describe0.describe15.describe21",
    "testDepth": 3,
    "longname": "test/Eligibility.test.js~describe0.describe15.describe21.it23",
    "access": null,
    "description": "should update startTime",
    "lineNumber": 137
  },
  {
    "__docId__": 105,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it24",
    "testId": 24,
    "memberof": "test/Eligibility.test.js~describe0.describe15.describe21",
    "testDepth": 3,
    "longname": "test/Eligibility.test.js~describe0.describe15.describe21.it24",
    "access": null,
    "description": "should reset _requestCount if period is reset",
    "lineNumber": 142
  },
  {
    "__docId__": 106,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe25",
    "testId": 25,
    "memberof": "test/Eligibility.test.js~describe0",
    "testDepth": 1,
    "longname": "test/Eligibility.test.js~describe0.describe25",
    "access": null,
    "description": "check",
    "lineNumber": 152
  },
  {
    "__docId__": 107,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it26",
    "testId": 26,
    "memberof": "test/Eligibility.test.js~describe0.describe25",
    "testDepth": 2,
    "longname": "test/Eligibility.test.js~describe0.describe25.it26",
    "access": null,
    "description": "should call _getPeriodRemaining",
    "lineNumber": 158
  },
  {
    "__docId__": 108,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it27",
    "testId": 27,
    "memberof": "test/Eligibility.test.js~describe0.describe25",
    "testDepth": 2,
    "longname": "test/Eligibility.test.js~describe0.describe25.it27",
    "access": null,
    "description": "should increment _requestCount",
    "lineNumber": 165
  },
  {
    "__docId__": 109,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it28",
    "testId": 28,
    "memberof": "test/Eligibility.test.js~describe0.describe25",
    "testDepth": 2,
    "longname": "test/Eligibility.test.js~describe0.describe25.it28",
    "access": null,
    "description": "should return true if _requestCount is less than _limit",
    "lineNumber": 171
  },
  {
    "__docId__": 110,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it29",
    "testId": 29,
    "memberof": "test/Eligibility.test.js~describe0.describe25",
    "testDepth": 2,
    "longname": "test/Eligibility.test.js~describe0.describe25.it29",
    "access": null,
    "description": "should return false if _requestCount is higher than _limit",
    "lineNumber": 175
  },
  {
    "__docId__": 111,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe30",
    "testId": 30,
    "memberof": "test/Eligibility.test.js~describe0",
    "testDepth": 1,
    "longname": "test/Eligibility.test.js~describe0.describe30",
    "access": null,
    "description": "getHeaders",
    "lineNumber": 182
  },
  {
    "__docId__": 112,
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "test/Limiter.test.js",
    "memberof": null,
    "longname": "test/Limiter.test.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "'use strict';\nconst chai       = require('chai');\nconst sinon      = require('sinon');\nconst sinonChai  = require('sinon-chai');\n\nchai.use(sinonChai);\n\nconst expect = chai.expect;\n\ndescribe('Limiter', () => {\n  let Limiter;\n  let limiter;\n  let config;\n  let validOpts;\n\n  beforeEach(() => {\n    config = {\n      key    : 'user.id',\n      limit  : 20,\n      period : 5000,\n    };\n    validOpts = {\n      request : {\n        user : {\n          id : 'something'\n        }\n      },\n      response : {},\n    }\n    Limiter = require('../src/Limiter.js');\n\n  });\n\n  describe('#constructor', () => {\n    it('should not error if not given a config', () => {\n      expect(() => { return new Limiter(); }).not.to.throw(Error);\n    });\n\n    describe('without config', () => {\n\n      beforeEach(() => {\n        limiter = new Limiter();\n      });\n\n      it('should assign DEFAULT_KEY to config.key', () => {\n        expect(limiter._config.key).to.equal('ip');\n      });\n\n      it('should default config.limit to null', () => {\n        expect(limiter._config.limit).to.not.exist;\n      });\n\n      it('should default config.period to null', () => {\n        expect(limiter._config.period).to.not.exist;\n      });\n\n      it('should create _eligibility', () => {\n        expect(limiter._eligibility).to.exist;\n      });\n\n    });\n\n    describe('with only key in config', () => {\n\n      beforeEach(() => {\n        limiter = new Limiter({ key : 'user' });\n      });\n\n      it('should assign given key to config.key', () => {\n        expect(limiter._config.key).to.equal('user');\n      });\n\n      it('should default config.limit to null', () => {\n        expect(limiter._config.limit).to.not.exist;\n      });\n\n      it('should default config.period to null', () => {\n        expect(limiter._config.period).to.not.exist;\n      });\n\n      it('should create _eligibility', () => {\n        expect(limiter._eligibility).to.exist;\n      });\n\n    });\n\n    describe('with config', () => {\n\n      beforeEach(() => {\n        limiter = new Limiter({ \n          key    : 'something.else',\n          limit  : 200,\n          period : 8000,\n        });\n      });\n\n      it('should assign given key to config.key', () => {\n        expect(limiter._config.key).to.equal('something.else');\n      });\n\n      it('should assign given period to config.limit', () => {\n        expect(limiter._config.limit).to.equal(200);\n      });\n\n      it('should assign given period to config.period', () => {\n        expect(limiter._config.period).to.equal(8000);\n      });\n\n      it('should create _eligibility', () => {\n        expect(limiter._eligibility).to.exist;\n      });\n\n    });\n\n  });\n\n  describe('#checkRequest', () => {\n    let request;\n    let response;\n\n    beforeEach(() => {\n      request = validOpts.request;\n      response = validOpts.response;\n    });\n\n    describe('when request within limits', () => {\n\n      beforeEach(() => {\n        limiter = new Limiter(config);\n      });\n\n      it('should error if no opts are given', () => {\n        expect(limiter.checkRequest).to.throw('Error');\n      });\n\n      it('should register a new Eligibility model if one doesn\\'t exist', () => {\n        limiter.checkRequest({ request, response })\n\n        expect(limiter._eligibility[request.user.id]).to.exist;\n        expect(limiter._eligibility[request.user.id]._requestCount).to.equal(1);\n      });\n\n      it('should use the same Eligibility instance with the same key', () => {\n        limiter.checkRequest({ request, response });\n        limiter.checkRequest({ request, response });\n        expect(limiter._eligibility[request.user.id]._requestCount).to.equal(2);\n      });\n\n    });\n\n    describe('when request outside of limits', () => {\n\n      beforeEach(() => {\n        limiter = new Limiter({\n          key    : 'user.id',\n          limit  : 0,\n          period : 0,\n        });\n      });\n\n      xit('should throw error if eligibility is false', () => {\n        expect(() => { limiter.checkRequest({ request, response }) }).to.throw(Error);\n      });\n\n    });\n\n  });\n\n});\n"
  },
  {
    "__docId__": 113,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe31",
    "testId": 31,
    "memberof": "test/Limiter.test.js",
    "testDepth": 0,
    "longname": "test/Limiter.test.js~describe31",
    "access": null,
    "description": "Limiter",
    "lineNumber": 10
  },
  {
    "__docId__": 114,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe32",
    "testId": 32,
    "memberof": "test/Limiter.test.js~describe31",
    "testDepth": 1,
    "longname": "test/Limiter.test.js~describe31.describe32",
    "access": null,
    "description": "#constructor",
    "lineNumber": 34
  },
  {
    "__docId__": 115,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it33",
    "testId": 33,
    "memberof": "test/Limiter.test.js~describe31.describe32",
    "testDepth": 2,
    "longname": "test/Limiter.test.js~describe31.describe32.it33",
    "access": null,
    "description": "should not error if not given a config",
    "lineNumber": 35
  },
  {
    "__docId__": 116,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe34",
    "testId": 34,
    "memberof": "test/Limiter.test.js~describe31.describe32",
    "testDepth": 2,
    "longname": "test/Limiter.test.js~describe31.describe32.describe34",
    "access": null,
    "description": "without config",
    "lineNumber": 39
  },
  {
    "__docId__": 117,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it35",
    "testId": 35,
    "memberof": "test/Limiter.test.js~describe31.describe32.describe34",
    "testDepth": 3,
    "longname": "test/Limiter.test.js~describe31.describe32.describe34.it35",
    "access": null,
    "description": "should assign DEFAULT_KEY to config.key",
    "lineNumber": 45
  },
  {
    "__docId__": 118,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it36",
    "testId": 36,
    "memberof": "test/Limiter.test.js~describe31.describe32.describe34",
    "testDepth": 3,
    "longname": "test/Limiter.test.js~describe31.describe32.describe34.it36",
    "access": null,
    "description": "should default config.limit to null",
    "lineNumber": 49
  },
  {
    "__docId__": 119,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it37",
    "testId": 37,
    "memberof": "test/Limiter.test.js~describe31.describe32.describe34",
    "testDepth": 3,
    "longname": "test/Limiter.test.js~describe31.describe32.describe34.it37",
    "access": null,
    "description": "should default config.period to null",
    "lineNumber": 53
  },
  {
    "__docId__": 120,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it38",
    "testId": 38,
    "memberof": "test/Limiter.test.js~describe31.describe32.describe34",
    "testDepth": 3,
    "longname": "test/Limiter.test.js~describe31.describe32.describe34.it38",
    "access": null,
    "description": "should create _eligibility",
    "lineNumber": 57
  },
  {
    "__docId__": 121,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe39",
    "testId": 39,
    "memberof": "test/Limiter.test.js~describe31.describe32",
    "testDepth": 2,
    "longname": "test/Limiter.test.js~describe31.describe32.describe39",
    "access": null,
    "description": "with only key in config",
    "lineNumber": 63
  },
  {
    "__docId__": 122,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it40",
    "testId": 40,
    "memberof": "test/Limiter.test.js~describe31.describe32.describe39",
    "testDepth": 3,
    "longname": "test/Limiter.test.js~describe31.describe32.describe39.it40",
    "access": null,
    "description": "should assign given key to config.key",
    "lineNumber": 69
  },
  {
    "__docId__": 123,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it41",
    "testId": 41,
    "memberof": "test/Limiter.test.js~describe31.describe32.describe39",
    "testDepth": 3,
    "longname": "test/Limiter.test.js~describe31.describe32.describe39.it41",
    "access": null,
    "description": "should default config.limit to null",
    "lineNumber": 73
  },
  {
    "__docId__": 124,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it42",
    "testId": 42,
    "memberof": "test/Limiter.test.js~describe31.describe32.describe39",
    "testDepth": 3,
    "longname": "test/Limiter.test.js~describe31.describe32.describe39.it42",
    "access": null,
    "description": "should default config.period to null",
    "lineNumber": 77
  },
  {
    "__docId__": 125,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it43",
    "testId": 43,
    "memberof": "test/Limiter.test.js~describe31.describe32.describe39",
    "testDepth": 3,
    "longname": "test/Limiter.test.js~describe31.describe32.describe39.it43",
    "access": null,
    "description": "should create _eligibility",
    "lineNumber": 81
  },
  {
    "__docId__": 126,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe44",
    "testId": 44,
    "memberof": "test/Limiter.test.js~describe31.describe32",
    "testDepth": 2,
    "longname": "test/Limiter.test.js~describe31.describe32.describe44",
    "access": null,
    "description": "with config",
    "lineNumber": 87
  },
  {
    "__docId__": 127,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it45",
    "testId": 45,
    "memberof": "test/Limiter.test.js~describe31.describe32.describe44",
    "testDepth": 3,
    "longname": "test/Limiter.test.js~describe31.describe32.describe44.it45",
    "access": null,
    "description": "should assign given key to config.key",
    "lineNumber": 97
  },
  {
    "__docId__": 128,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it46",
    "testId": 46,
    "memberof": "test/Limiter.test.js~describe31.describe32.describe44",
    "testDepth": 3,
    "longname": "test/Limiter.test.js~describe31.describe32.describe44.it46",
    "access": null,
    "description": "should assign given period to config.limit",
    "lineNumber": 101
  },
  {
    "__docId__": 129,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it47",
    "testId": 47,
    "memberof": "test/Limiter.test.js~describe31.describe32.describe44",
    "testDepth": 3,
    "longname": "test/Limiter.test.js~describe31.describe32.describe44.it47",
    "access": null,
    "description": "should assign given period to config.period",
    "lineNumber": 105
  },
  {
    "__docId__": 130,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it48",
    "testId": 48,
    "memberof": "test/Limiter.test.js~describe31.describe32.describe44",
    "testDepth": 3,
    "longname": "test/Limiter.test.js~describe31.describe32.describe44.it48",
    "access": null,
    "description": "should create _eligibility",
    "lineNumber": 109
  },
  {
    "__docId__": 131,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe49",
    "testId": 49,
    "memberof": "test/Limiter.test.js~describe31",
    "testDepth": 1,
    "longname": "test/Limiter.test.js~describe31.describe49",
    "access": null,
    "description": "#checkRequest",
    "lineNumber": 117
  },
  {
    "__docId__": 132,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe50",
    "testId": 50,
    "memberof": "test/Limiter.test.js~describe31.describe49",
    "testDepth": 2,
    "longname": "test/Limiter.test.js~describe31.describe49.describe50",
    "access": null,
    "description": "when request within limits",
    "lineNumber": 126
  },
  {
    "__docId__": 133,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it51",
    "testId": 51,
    "memberof": "test/Limiter.test.js~describe31.describe49.describe50",
    "testDepth": 3,
    "longname": "test/Limiter.test.js~describe31.describe49.describe50.it51",
    "access": null,
    "description": "should error if no opts are given",
    "lineNumber": 132
  },
  {
    "__docId__": 134,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it52",
    "testId": 52,
    "memberof": "test/Limiter.test.js~describe31.describe49.describe50",
    "testDepth": 3,
    "longname": "test/Limiter.test.js~describe31.describe49.describe50.it52",
    "access": null,
    "description": "should register a new Eligibility model if one doesn't exist",
    "lineNumber": 136
  },
  {
    "__docId__": 135,
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it53",
    "testId": 53,
    "memberof": "test/Limiter.test.js~describe31.describe49.describe50",
    "testDepth": 3,
    "longname": "test/Limiter.test.js~describe31.describe49.describe50.it53",
    "access": null,
    "description": "should use the same Eligibility instance with the same key",
    "lineNumber": 143
  },
  {
    "__docId__": 136,
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe54",
    "testId": 54,
    "memberof": "test/Limiter.test.js~describe31.describe49",
    "testDepth": 2,
    "longname": "test/Limiter.test.js~describe31.describe49.describe54",
    "access": null,
    "description": "when request outside of limits",
    "lineNumber": 151
  }
]